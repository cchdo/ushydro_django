{% extends "base.html" %}
{% load helpers %}
{% load sekizai_tags %}
{% block hydrotable %}
{% if cruises %}
<div class="container">
<table id="datatable" >
  <thead>
    <tr>
      <th>Cruise</th>
      <th>Dates</th>
      <th>Expocode<br/>(CTD, Bottle Data)</th>
      <th>Ship</th>
      <th>Days</th>
      <th>Stations</th>
      <th>Ports</th>
      <th>Chief Scientist</th>
      {% for param in parameters %}
      <th> {{param.name}}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for cruise in cruises %}
    <tr>
      <td>{{ cruise.name }}</td>
      <td>{{ cruise.safe_start_date }} - {{ cruise.safe_end_date }}</td>
      <td>{% if cruise.expocode_link %}<a href="{{cruise.expocode_link}}">{% endif %}{{ cruise.safe_expocode }}{% if cruise.expocode_link %}</a>{% endif %}</td>
      <td>{% if cruise.ship.url %}<a href="{{cruise.ship.url}}">{% endif %}{{ cruise.ship }}{% if cruise.ship.url %}</a>{% endif %}</td>
      <td>{{ cruise.safe_days }}</td>
      <td>{{ cruise.stations }}</td>
      <td>{{ cruise.safe_start_port }} - {{ cruise.safe_end_port }}</td>
      <td><ul>{% for cs in cruise.chief_scientist.all %}<li>{{cs}}</li>{% endfor %}<ul></td>
      {% for param in parameters %}
      <td>
        <ul>
        {% if param in cruise.parameters %}
        {% for program in cruise.programs %}
        {% if program.parameter == param %}
        <li>
        {% if program.url %}
        <a href="{{program.url}}">
          {% endif %}
        {{ program.pi.name }}
        {% if program.url %}
    </a>
    {% endif %}
        </li>
        {% endif %}
        {% endfor %}
  </ul>
        {% else %}
        -
        {% endif %}
        {% endfor %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endif %}
{% endblock %}
{% block js %}
{% addtoblock "js" %}
<script src="/static/hydrotable/js/jquery.dataTables.js" ></script>
<script src="/static/hydrotable/js/dataTables.bootstrap.js" ></script>
<script src="/static/hydrotable/js/FixedColumns.js" ></script>
<script>
  var mtable;
  $(window).load( function () {
    var oTable = $('#datatable').dataTable( {
      "sScrollX": "100%",
      "bScrollCollapse": true,
      "aaSorting": [[ 1, "desc" ]],
    } );
    new FixedColumns( oTable);

    $('.DTFC_ScrollWrapper').append('<div class="rightgradient"></div>');
    $('.DTFC_ScrollWrapper').append('<div class="rightarrow"></div>');
    $('.rightarrow').click(function(){
      s = $('.dataTables_scrollBody').scrollLeft();
      $('.dataTables_scrollBody').animate({
        scrollLeft: s + 200
      }, 250);

    });
  } );
</script>
{% endaddtoblock %}
{% endblock %}
{% block css %}
{% addtoblock "css" %}
<link href="/static/hydrotable/css/dataTables.bootstrap.css" rel="stylesheet" >
<link href="/static/hydrotable/css/demo_table.css" rel="stylesheet" >
{% endaddtoblock %}
{% endblock %}
